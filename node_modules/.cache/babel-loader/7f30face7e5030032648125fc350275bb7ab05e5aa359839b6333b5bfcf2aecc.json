{"ast":null,"code":"import _toConsumableArray from\"/Users/hillswor/Development/code/phase-4/squatch-spotter-client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/Users/hillswor/Development/code/phase-4/squatch-spotter-client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/hillswor/Development/code/phase-4/squatch-spotter-client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Sighting(_ref){var match=_ref.match,loggedIn=_ref.loggedIn,user=_ref.user;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),sighting=_useState2[0],setSighting=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),commentText=_useState4[0],setCommentText=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];useEffect(function(){fetch(\"https://sqautch-spotter-server.onrender.com/sightings/\".concat(match.params.id)).then(function(response){return response.json();}).then(function(data){return setSighting(data);});},[match.params.id]);var handleCommentSubmit=function handleCommentSubmit(e){e.preventDefault();if(!loggedIn){setError(\"You need to be logged in to post a comment.\");return;}if(!commentText){setError(\"Comment text is required.\");return;}var comment={user_id:user.id,sighting_id:sighting.id,comment_text:commentText};fetch(\"https://sqautch-spotter-server.onrender.com/comments\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(comment)}).then(function(response){return response.json();}).then(function(data){setCommentText(\"\");setError(\"\");setSighting(function(prevSighting){return _objectSpread(_objectSpread({},prevSighting),{},{comments:[].concat(_toConsumableArray(prevSighting.comments),[data])});});}).catch(function(error){console.error(\"Error posting comment: \",error);});};if(!sighting){return/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 mt-40\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-base text-green-600 font-semibold tracking-wide uppercase\",children:[sighting.location.name,\", \",sighting.location.state]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-1 text-4xl text-green-900 sm:text-5xl sm:tracking-tight lg:text-6xl\",children:[\"Sighted on \",new Date(sighting.sighting_date).toDateString()]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-5 sm:mt-8 sm:flex sm:justify-center lg:justify-start\",children:/*#__PURE__*/_jsx(\"div\",{className:\"rounded-md shadow\",children:/*#__PURE__*/_jsx(\"p\",{className:\"px-5 text-green-1000\",children:sighting.description})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-10\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-green-600 mb-5\",children:\"Comments:\"}),sighting.comments&&sighting.comments.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-green-900\",children:\"No comments yet.\"}):sighting.comments.map(function(comment){return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-green-200 my-2 rounded shadow-md\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-green-900\",children:comment.comment_text}),/*#__PURE__*/_jsxs(\"p\",{className:\"font-bold text-green-900 text-sm\",children:[\"- \",comment.user.email]})]},comment.id);}),loggedIn?/*#__PURE__*/_jsxs(\"form\",{className:\"mt-8\",onSubmit:handleCommentSubmit,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"comment\",className:\"text-lg font-bold mb-2\",children:\"Add a comment:\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"comment\",name:\"comment\",className:\"w-full px-3 py-2 border border-green-300 placeholder-green-500 text-green-900 rounded\",rows:4,value:commentText,onChange:function onChange(e){return setCommentText(e.target.value);}}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500\",children:error}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500\",children:\"Post Comment\"})]}):/*#__PURE__*/_jsxs(\"p\",{className:\"mt-8\",children:[\"Please\",\" \",/*#__PURE__*/_jsx(\"a\",{href:\"/login\",className:\"text-green-600 font-bold underline\",children:\"log in\"}),\" \",\"or\",\" \",/*#__PURE__*/_jsx(\"a\",{href:\"/signup\",className:\"text-green-600 font-bold underline\",children:\"sign up\"}),\" \",\"to post a comment.\"]})]})]});}export default Sighting;","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","Sighting","_ref","match","loggedIn","user","_useState","_useState2","_slicedToArray","sighting","setSighting","_useState3","_useState4","commentText","setCommentText","_useState5","_useState6","error","setError","fetch","concat","params","id","then","response","json","data","handleCommentSubmit","e","preventDefault","comment","user_id","sighting_id","comment_text","method","headers","body","JSON","stringify","prevSighting","_objectSpread","comments","_toConsumableArray","catch","console","children","className","location","name","state","Date","sighting_date","toDateString","description","length","map","email","onSubmit","htmlFor","rows","value","onChange","target","type","href"],"sources":["/Users/hillswor/Development/code/phase-4/squatch-spotter-client/src/components/Sighting.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\n\nfunction Sighting({ match, loggedIn, user }) {\n  const [sighting, setSighting] = useState(null);\n  const [commentText, setCommentText] = useState(\"\");\n  const [error, setError] = useState(\"\");\n\n  useEffect(() => {\n    fetch(\n      `https://sqautch-spotter-server.onrender.com/sightings/${match.params.id}`\n    )\n      .then((response) => response.json())\n      .then((data) => setSighting(data));\n  }, [match.params.id]);\n\n  const handleCommentSubmit = (e) => {\n    e.preventDefault();\n    if (!loggedIn) {\n      setError(\"You need to be logged in to post a comment.\");\n      return;\n    }\n    if (!commentText) {\n      setError(\"Comment text is required.\");\n      return;\n    }\n\n    const comment = {\n      user_id: user.id,\n      sighting_id: sighting.id,\n      comment_text: commentText,\n    };\n\n    fetch(\"https://sqautch-spotter-server.onrender.com/comments\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(comment),\n    })\n      .then((response) => response.json())\n      .then((data) => {\n        setCommentText(\"\");\n        setError(\"\");\n        setSighting((prevSighting) => ({\n          ...prevSighting,\n          comments: [...prevSighting.comments, data],\n        }));\n      })\n      .catch((error) => {\n        console.error(\"Error posting comment: \", error);\n      });\n  };\n\n  if (!sighting) {\n    return <p>Loading...</p>;\n  }\n\n  return (\n    <div className=\"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 mt-40\">\n      <div className=\"text-center\">\n        <h2 className=\"text-base text-green-600 font-semibold tracking-wide uppercase\">\n          {sighting.location.name}, {sighting.location.state}\n        </h2>\n        <p className=\"mt-1 text-4xl text-green-900 sm:text-5xl sm:tracking-tight lg:text-6xl\">\n          Sighted on {new Date(sighting.sighting_date).toDateString()}\n        </p>\n        <div className=\"mt-5 sm:mt-8 sm:flex sm:justify-center lg:justify-start\">\n          <div className=\"rounded-md shadow\">\n            <p className=\"px-5 text-green-1000\">{sighting.description}</p>\n          </div>\n        </div>\n      </div>\n      <div className=\"mt-10\">\n        <h2 className=\"text-2xl font-bold text-green-600 mb-5\">Comments:</h2>\n        {sighting.comments && sighting.comments.length === 0 ? (\n          <p className=\"text-green-900\">No comments yet.</p>\n        ) : (\n          sighting.comments.map((comment) => (\n            <div\n              key={comment.id}\n              className=\"p-4 bg-green-200 my-2 rounded shadow-md\"\n            >\n              <p className=\"text-green-900\">{comment.comment_text}</p>\n              <p className=\"font-bold text-green-900 text-sm\">\n                - {comment.user.email}\n              </p>\n            </div>\n          ))\n        )}\n\n        {loggedIn ? (\n          <form className=\"mt-8\" onSubmit={handleCommentSubmit}>\n            <label htmlFor=\"comment\" className=\"text-lg font-bold mb-2\">\n              Add a comment:\n            </label>\n            <textarea\n              id=\"comment\"\n              name=\"comment\"\n              className=\"w-full px-3 py-2 border border-green-300 placeholder-green-500 text-green-900 rounded\"\n              rows={4}\n              value={commentText}\n              onChange={(e) => setCommentText(e.target.value)}\n            ></textarea>\n            {error && <p className=\"text-red-500\">{error}</p>}\n            <button\n              type=\"submit\"\n              className=\"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500\"\n            >\n              Post Comment\n            </button>\n          </form>\n        ) : (\n          <p className=\"mt-8\">\n            Please{\" \"}\n            <a href=\"/login\" className=\"text-green-600 font-bold underline\">\n              log in\n            </a>{\" \"}\n            or{\" \"}\n            <a href=\"/signup\" className=\"text-green-600 font-bold underline\">\n              sign up\n            </a>{\" \"}\n            to post a comment.\n          </p>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default Sighting;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}